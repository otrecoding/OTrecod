<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>transfo_dist() — transfo_dist • OTrecod</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="transfo_dist() — transfo_dist" />
<meta property="og:description" content="This function prepares an overlayed database for data fusion according to the distance function chosen to evaluate the proximities between units." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">OTrecod</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/an-application-of-the-OTrecod-package.html">an-application-of-the-OTrecod-package</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>transfo_dist()</h1>
    
    <div class="hidden name"><code>transfo_dist.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function prepares an overlayed database for data fusion according to the distance function chosen to evaluate the proximities between units.</p>
    </div>

    <pre class="usage"><span class='fu'>transfo_dist</span><span class='op'>(</span>
  <span class='va'>DB</span>,
  index_DB_Y_Z <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>,
  quanti <span class='op'>=</span> <span class='cn'>NULL</span>,
  nominal <span class='op'>=</span> <span class='cn'>NULL</span>,
  ordinal <span class='op'>=</span> <span class='cn'>NULL</span>,
  logic <span class='op'>=</span> <span class='cn'>NULL</span>,
  convert_num <span class='op'>=</span> <span class='cn'>NULL</span>,
  convert_clss <span class='op'>=</span> <span class='cn'>NULL</span>,
  prep_choice <span class='op'>=</span> <span class='st'>"E"</span>,
  info <span class='op'>=</span> <span class='fl'>0.8</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>DB</th>
      <td><p>a data.frame composed of exactly two overlayed databases with a column of database identifier, two columns corresponding to a same information
differently encoded in the two databases and covariates. The order of the variables have no importance.</p></td>
    </tr>
    <tr>
      <th>index_DB_Y_Z</th>
      <td><p>a vector of exactly three integers. The first integer must correspond to the column index of the database identifier. The second integer corresponds
to the index of the target variable in the first database while the third integer corresponds to the index of column related to the target variable in the second database.</p></td>
    </tr>
    <tr>
      <th>quanti</th>
      <td><p>the column indexes of all the quantitative variables (database identificatier and target variables included) stored in a vector.</p></td>
    </tr>
    <tr>
      <th>nominal</th>
      <td><p>the column indexes of all the nominal (not ordered) variables (DB identification and target variables included) stored in a vector.</p></td>
    </tr>
    <tr>
      <th>ordinal</th>
      <td><p>the column indexes of all the ordinal variables (DB identification and target variables included) stored in a vector.</p></td>
    </tr>
    <tr>
      <th>logic</th>
      <td><p>the column indexes of all the boolean variables stored in a vector.</p></td>
    </tr>
    <tr>
      <th>convert_num</th>
      <td><p>the column indexes of the continuous (quantitative) variables to convert in ordered factors. All indexes declared in this argument must have been declared in the argument <code>quanti</code> (no conversion by default).</p></td>
    </tr>
    <tr>
      <th>convert_clss</th>
      <td><p>according to the argument <code>convert_num</code>, a vector indicating for each continuous variable to convert the corresponding desired number of levels. If the length of the argument <code>convert_num</code> exceeds 1 while the length of <code>convert_clss</code> is equal to 1 (only one integer),
each discretization will count the same number of levels.</p></td>
    </tr>
    <tr>
      <th>prep_choice</th>
      <td><p>a character string corresponding to the distance function chosen between: the euclidean distance ("E", by default), the Manhattan distance ("M"),
the Gower distance ("G"), the Hamming (also called binary) distance ("H"), and a distance computed from principal components of a factor analysis of mixed data ("FAMD").</p></td>
    </tr>
    <tr>
      <th>info</th>
      <td><p>a ratio (between 0 and 1, 0.8 is the default value) that corresponds to the minimal part of variability that must be taken into account by the remaining principal components of the FAMD when this approach is required.
This ratio will fix the number of components that will be kept with this approach. When the argument is set to 1, all the variability is considered.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data.frame whose covariates have been transformed according to the distance function or approach (for FAMD) chosen. The columns of the data.frame could have been reordered so that the database identifier, \(Y\) and \(Z\) correspond to the first three columns respectively.
Moreover the order of rows remains unchanged during the process.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>A. EXPECTED STRUCTURE FOR THE INPUT DATABASE</p>
<p>In input of this function, the expected database is the result of an overlay between two databases A and B.
This structure can be guaranteed using the specific outputs of the functions <code><a href='merge_dbs.html'>merge_dbs</a></code> or <code><a href='select_pred.html'>select_pred</a></code>.
Nevertheless, it is also possible to apply directly the function <code>transfo_dist</code> on a raw database provided that a specific structure is respected in input.
The overlayed database (A placed on top of B) must count at least four columns (in an a unspecified order of appearance in the database):</p><ul>
<li><p>A column indicating the database identifier (two classes or levels if factor: A and B, 1 and 2, ...)</p></li>
<li><p>A column dedicated to the outcome (or target variable) of the first database and denoted \(Y\) for example. This variable can be of categorical (nominal or ordinal factor) or continuous type. Nevertheless, in this last case, a warning will appear and the variable will be automatically converted in ordered factors as a prerequisite format of the database before using data fusion algorithms.</p></li>
<li><p>A column dedicated to the outcome (or target variable) of the second database and denoted \(Z\) for example. As before, this variable can be of categorical (nominal or ordinal factor) or continuous type, and the variable will be automatically converted in ordered factors as a prerequisite format of the database before using data fusion algorithms.</p></li>
<li><p>At least one shared variable (same encoding in the two databases). Incomplete information is possible on shared covariates only with more than one shared covariate in the final database.</p></li>
</ul><p>In this context, the two databases are overlayed and the information related to \(Y\) in the second database must be missing as well as the information related to \(Z\) in the first one.
The column indexes related to the database identifier, \(Y\) and \(Z\) must be specified in this order in the argument <code>index_DB_Y_Z</code>.
Moreover, all column indexes (including those related to identifier and target variables \(Y\) and \(Z\)) of the overlayed database (DB) must be declared once (and only once), among the arguments <code>quanti</code>, <code>nominal</code>, <code>ordinal</code>, and <code>logic</code>.</p>

<p>B. TRANSFORMATIONS OF CONTINUOUS COVARIATES</p>
<p>Because some algorithms dedicated to solving recoding problems like <code>JOINT</code> and <code>R-JOINT</code> (see (1) and/or the documentation of <code><a href='OT_joint.html'>OT_joint</a></code>) requires the use of no continuous covariates, the function <code>transfo_dist</code> integrates in is syntax
a process dedicated to the categorization of continuous variables. For this, it is necessary to rigorously fill in the arguments <code>convert_num</code> and <code>convert_clss</code>. The first one specifies the indexes of continuous variables to transform
in ordered factors while the second one assigns the corresponding desired number of levels.
Only covariates should be transformed (not outcomes) and missing informations are not taken into account for the transformations.
Notice that all the indexes informed in the argument <code>convert_num</code> must also be informed in the argument <code>quanti</code>.</p>

<p>C. TRANSFORMATIONS ON THE DATABASE ACCORDING TO THE CHOSEN DISTANCE FUNCTION</p>

<p>These necessary transformations are related to the type of each covariate.
It depends on the distance function chosen by user in the <code>prep_choice</code> argument.</p>
<p>1. For the Euclidean ("E") and Manhattan ("M") distances (see (2) and (3)):
all the remaining continuous variables are standardized.
The related recoding to a boolean variable is 1 for <code>TRUE</code> and 0 for <code>FALSE</code>.
The recoding of a nominal variable of k classes corresponds to its related disjunctive table (of (k-1) binary variables)).
The ordinal variables are all converted to numeric variables (please take care that the order of the classes of each of these variables is well specified at the beginning).</p>
<p>2. For the Hamming ("H") distance (see (2) and (3)):
all the continuous variables must be transformed beforehand in categorical forms using the internal process described in section B or via another external approach.
The boolean variables are all converted in ordinal forms and then turned into binaries.
The recoding for nominal or ordinal variable of k classes corresponds to its related disjunctive table (i.e (k-1) binary variables)).</p>
<p>3. For the Gower ("G") distance (see (4)):
all covariates remain unchanged</p>
<p>4. Using the principal components from a factor analysis for mixed data (FAMD (5)):
a factor analysis for mixed data is applied on the covariates of the database and a specific number of the related principal components is remained (depending on the minimal part of variability explained by the covariates that the user wishes to keep by varying the <code>info</code> option).
The function integrates in its syntax the function <code><a href='https://rdrr.io/pkg/FactoMineR/man/FAMD.html'>FAMD</a></code> of the package <span class="pkg">FactoMiner</span> (6) using default parameters.
After this step, the covariates are replaced by the remaining principal components of the FAMD, and each value corresponds to coordinates linked to each component.
Please notice that this method supposed complete covariates in input, nevertheless in presence of incomplete covariates, each corresponding rows will be dropped from the study, a warning will appear and the number of remaining rows will be indicated.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    
<ol>
<li><p>Gares V, Omer J (2020) Regularized optimal transport of covariates and outcomes in data recoding. Journal of the American Statistical Association. doi: <a href='https://doi.org/10.1080/01621459.2020.1775615'>10.1080/01621459.2020.1775615</a></p></li>
<li><p>Anderberg, M.R. (1973). Cluster analysis for applications, 359 pp., Academic Press, New York, NY, USA.</p></li>
<li><p>Borg, I. and Groenen, P. (1997). Modern Multidimensional Scaling. Theory and Applications. Springer.</p></li>
<li><p>Gower, J. C. (1971). A general coefficient of similarity and some of its properties. Biometrics, 27, 623--637.</p></li>
<li><p>Pages J. (2004). Analyse factorielle de donnees mixtes. Revue Statistique Appliquee. LII (4). pp. 93-111.</p></li>
<li><p>Lê S, Josse J, Husson, F. (2008). FactoMineR: An R Package for Multivariate Analysis. Journal of Statistical Software. 25(1). pp. 1-18.</p></li>
</ol>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='transfo_quali.html'>transfo_quali</a></code>,<code><a href='merge_dbs.html'>merge_dbs</a></code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Gregory Guernec</p>
<p><a href='mailto:otrecod.pkg@gmail.com'>otrecod.pkg@gmail.com</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>### Using the table simu_data:</span>

<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>simu_data</span><span class='op'>)</span>

<span class='co'># 1. the Euclidean distance (same output with Manhattan distance),</span>
<span class='va'>try1</span> <span class='op'>=</span> <span class='fu'>transfo_dist</span><span class='op'>(</span><span class='va'>simu_data</span>,quanti <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>8</span><span class='op'>)</span>, nominal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>4</span><span class='op'>:</span><span class='fl'>5</span>,<span class='fl'>7</span><span class='op'>)</span>,
                    ordinal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>6</span><span class='op'>)</span>, logic <span class='op'>=</span> <span class='cn'>NULL</span>, prep_choice <span class='op'>=</span> <span class='st'>"E"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Your target DB[, "Z"] was numeric ... By default, it has been converted in factor of integers</span></div><div class='output co'>#&gt; <span class='message'>5 remaining levels</span></div><div class='input'><span class='co'># Here Yb2 was stored in numeric: It has been automatically converted in factor</span>

<span class='co'># You can also convert beforehand Yb2 in ordered factor by example:</span>
<span class='va'>sim_data</span>     <span class='op'>=</span> <span class='va'>simu_data</span>
<span class='va'>sim_data</span><span class='op'>$</span><span class='va'>Yb2</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.ordered</a></span><span class='op'>(</span><span class='va'>sim_data</span><span class='op'>$</span><span class='va'>Yb2</span><span class='op'>)</span>
<span class='va'>try1</span> <span class='op'>=</span> <span class='fu'>transfo_dist</span><span class='op'>(</span><span class='va'>sim_data</span>,quanti <span class='op'>=</span> <span class='fl'>8</span>, nominal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>4</span><span class='op'>:</span><span class='fl'>5</span>,<span class='fl'>7</span><span class='op'>)</span>,
                    ordinal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>6</span><span class='op'>)</span>, logic <span class='op'>=</span> <span class='cn'>NULL</span>, prep_choice <span class='op'>=</span> <span class='st'>"E"</span><span class='op'>)</span>

<span class='co'># 2. The Euclidean distance generated on principal components</span>
<span class='co'>#    by a factor analysis for mixed data (FAMD):</span>
<span class='va'>try2</span> <span class='op'>=</span> <span class='fu'>transfo_dist</span><span class='op'>(</span><span class='va'>simu_data</span>,quanti <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>8</span><span class='op'>)</span>, nominal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>4</span><span class='op'>:</span><span class='fl'>5</span>,<span class='fl'>7</span><span class='op'>)</span>,
                    ordinal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>6</span><span class='op'>)</span>, logic <span class='op'>=</span> <span class='cn'>NULL</span>, prep_choice <span class='op'>=</span> <span class='st'>"FAMD"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Your target DB[, "Z"] was numeric ... By default, it has been converted in factor of integers</span></div><div class='output co'>#&gt; <span class='message'>5 remaining levels</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Presence of NA on covariates. You should work with complete or imputed DB before using this method.</span>
#&gt; <span class='warning'>              By default, only rows with no NA on covariates have been kept.</span></div><div class='output co'>#&gt; <span class='message'>Only528rows(75%)are kept here corresponding to complete cases</span></div><div class='input'>
<span class='co'># Please notice that this method works only with rows that have complete</span>
<span class='co'># information on covariates.</span>

<span class='co'># 3. The Gower distance for mixed data:</span>
<span class='va'>try3</span> <span class='op'>=</span> <span class='fu'>transfo_dist</span><span class='op'>(</span><span class='va'>simu_data</span>,quanti <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>8</span><span class='op'>)</span>, nominal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>4</span><span class='op'>:</span><span class='fl'>5</span>,<span class='fl'>7</span><span class='op'>)</span>,
                    ordinal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>6</span><span class='op'>)</span>, logic <span class='op'>=</span> <span class='cn'>NULL</span>, prep_choice <span class='op'>=</span> <span class='st'>"G"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Your target DB[, "Z"] was numeric ... By default, it has been converted in factor of integers</span></div><div class='output co'>#&gt; <span class='message'>5 remaining levels</span></div><div class='input'>
<span class='co'># 4. The Hamming distance:</span>
<span class='co'># Here the quanti option could only contain indexes related to targets.</span>
<span class='co'># Column indexes related to potential binary covariates or covariates with</span>
<span class='co'># finite number of values must be include in the ordinal option.</span>
<span class='co'># So in simu_data, the discretization of the variable age is required (index=8),</span>
<span class='co'># using the convert_num and convert_clss arguments (for tertiles = 3):</span>

<span class='va'>try4</span> <span class='op'>=</span> <span class='fu'>transfo_dist</span><span class='op'>(</span><span class='va'>simu_data</span>,quanti <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>8</span><span class='op'>)</span>, nominal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>4</span><span class='op'>:</span><span class='fl'>5</span>,<span class='fl'>7</span><span class='op'>)</span>,ordinal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>6</span><span class='op'>)</span>,
convert_num <span class='op'>=</span> <span class='fl'>8</span>, convert_clss <span class='op'>=</span> <span class='fl'>3</span>, prep_choice <span class='op'>=</span> <span class='st'>"H"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Your target DB[, "Z"] was numeric ... By default, it has been converted in factor of integers</span></div><div class='output co'>#&gt; <span class='message'>5 remaining levels</span></div><div class='input'>
<span class='co'># \donttest{</span>
<span class='co'># Other situation with a new numeric covariate with a finite number of values</span>
<span class='va'>simu_dat</span> <span class='op'>=</span> <span class='va'>simu_data</span><span class='op'>[</span>,<span class='op'>-</span><span class='fl'>8</span><span class='op'>]</span>
<span class='va'>simu_dat</span><span class='op'>$</span><span class='va'>new</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>,<span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>simu_data</span><span class='op'>)</span>,replace <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>try5</span> <span class='op'>=</span> <span class='fu'>transfo_dist</span><span class='op'>(</span><span class='va'>simu_dat</span>,quanti <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>8</span><span class='op'>)</span>, nominal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>4</span><span class='op'>:</span><span class='fl'>5</span>,<span class='fl'>7</span><span class='op'>)</span>,ordinal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>6</span><span class='op'>)</span>,
prep_choice <span class='op'>=</span> <span class='st'>"H"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='error'>Error in transfo_dist(simu_dat, quanti = c(3, 8), nominal = c(1, 4:5,     7), ordinal = c(2, 6), prep_choice = "H"): Incompatible type(s) of covariate(s) with distance chosen: No numeric variable with Hamming distance.</span>
#&gt; <span class='error'>         If your variable is binary or has a finite number of values, please put its corresponding index of column</span>
#&gt; <span class='error'>         in the ordinal option, rather than in the quanti option.If not, categorize it, or change distance function.</span></div><div class='input'><span class='co'># Return Error because a continuous variable remains</span>
<span class='co'># }</span>

<span class='co'>### This function works whatever the order of your columns in your database:</span>
<span class='co'># Suppose that we re-order columns in simu_data:</span>
<span class='va'>simu_data2</span> <span class='op'>=</span> <span class='va'>simu_data</span><span class='op'>[</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>4</span><span class='op'>:</span><span class='fl'>7</span>,<span class='fl'>3</span>,<span class='fl'>8</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>]</span>

<span class='co'># By changing the corresponding indexes in the index_DB_Y_Z argument,</span>
<span class='co'># we observe the desired output:</span>
<span class='va'>try5</span> <span class='op'>=</span> <span class='fu'>transfo_dist</span><span class='op'>(</span><span class='va'>simu_data2</span>,index_DB_Y_Z <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>8</span>,<span class='fl'>1</span>,<span class='fl'>6</span><span class='op'>)</span>,quanti <span class='op'>=</span> <span class='fl'>6</span><span class='op'>:</span><span class='fl'>7</span>, nominal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span><span class='op'>:</span><span class='fl'>3</span>,<span class='fl'>5</span>,<span class='fl'>8</span><span class='op'>)</span>,
                     ordinal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>4</span><span class='op'>)</span>, logic <span class='op'>=</span> <span class='cn'>NULL</span>, prep_choice <span class='op'>=</span> <span class='st'>"E"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Your target DB[, "Z"] was numeric ... By default, it has been converted in factor of integers</span></div><div class='output co'>#&gt; <span class='message'>5 remaining levels</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Gregory Guernec, Valerie Gares.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


