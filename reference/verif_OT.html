<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>verif_OT() — verif_OT • OTrecod</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="verif_OT() — verif_OT"><meta property="og:description" content="This function proposes post-process verifications after data fusion by optimal transportation algorithms."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">OTrecod</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/an-application-of-the-OTrecod-package.html">an-application-of-the-OTrecod-package</a>
    </li>
    <li>
      <a href="../articles/application-on-real-data-with-na.html">application-on-real-data-with-na</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>verif_OT()</h1>
    
    <div class="hidden name"><code>verif_OT.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function proposes post-process verifications after data fusion by optimal transportation algorithms.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">verif_OT</span><span class="op">(</span></span>
<span>  <span class="va">ot_out</span>,</span>
<span>  group.class <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ordinal <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  stab.prob <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  min.neigb <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>ot_out</dt>
<dd><p>an otres object from <code><a href="OT_outcome.html">OT_outcome</a></code> or <code><a href="OT_joint.html">OT_joint</a></code></p></dd>


<dt>group.class</dt>
<dd><p>a boolean indicating if the results related to the proximity between outcomes by grouping levels are requested in output (<code>FALSE</code> by default).</p></dd>


<dt>ordinal</dt>
<dd><p>a boolean that indicates if \(Y\) and \(Z\) are ordinal (<code>TRUE</code> by default) or not. This argument is only useful in the context of groups of levels (<code>group.class</code>=TRUE).</p></dd>


<dt>stab.prob</dt>
<dd><p>a boolean indicating if the results related to the stability of the algorithm are requested in output (<code>FALSE</code> by default).</p></dd>


<dt>min.neigb</dt>
<dd><p>a value indicating the minimal required number of neighbors to consider in the estimation of stability (1 by default).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list of 7 objects is returned:</p>
<dl><dt>nb.profil</dt>
<dd><p>the number of profiles of covariates</p></dd>

<dt>conf.mat</dt>
<dd><p>the global confusion matrix between \(Y\) and \(Z\)</p></dd>

<dt>res.prox</dt>
<dd><p>a summary table related to the association measures between \(Y\) and \(Z\)</p></dd>

<dt>res.grp</dt>
<dd><p>a summary table related to the study of the proximity of \(Y\) and \(Z\) using group of levels. Only if the <code>group.class</code> argument is set to TRUE.</p></dd>

<dt>hell</dt>
<dd><p>Hellinger distances between observed and predicted distributions</p></dd>

<dt>eff.neig</dt>
<dd><p>a table which corresponds to a count of conditional probabilities according to the number of neighbors used in their computation (only the first ten values)</p></dd>

<dt>res.stab</dt>
<dd><p>a summary table related to the stability of the algorithm</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>In a context of data fusion, where information from a same target population is summarized via two specific variables \(Y\) and \(Z\) (two ordinal or nominal factors with different number of levels \(n_Y\) and \(n_Z\)), never jointly observed and respectively stored in two distinct databases A and B,
Optimal Transportation (OT) algorithms (see the models <code>OUTCOME</code>, <code>R_OUTCOME</code>, <code>JOINT</code>, and <code>R_JOINT</code> of the reference (2) for more details)
propose methods for the recoding of \(Y\) in B and/or \(Z\) in A. Outputs from the functions <code>OT_outcome</code> and <code>OT_joint</code> so provides the related predictions to \(Y\) in B and/or \(Z\) in A,
and from these results, the function <code>verif_OT</code> provides a set of tools (optional or not, depending on the choices done by user in input) to estimate:</p><ol><li><p>the association between \(Y\) and \(Z\) after recoding</p></li>
<li><p>the similarities between observed and predicted distributions</p></li>
<li><p>the stability of the predictions proposed by the algorithm</p></li>
</ol><p>A. PAIRWISE ASSOCIATION BETWEEN \(Y\) AND \(Z\)</p>
<p>The first step uses standard criterions (Cramer's V, and Spearman's rank correlation coefficient) to evaluate associations between two ordinal variables in both databases or in only one database.
When the argument <code>group.class = TRUE</code>, these informations can be completed by those provided by the function <code><a href="error_group.html">error_group</a></code>, which is directly integrate in the function <code>verif_OT</code>.
Assuming that \(n_Y &gt; n_Z\), and that one of the two scales of \(Y\) or \(Z\) is unknown, this function gives additional informations about the potential link between the levels of the unknown scale.
The function proceeds to this result in two steps. Firsty, <code><a href="error_group.html">error_group</a></code> groups combinations of modalities of \(Y\) to build all possible variables \(Y'\) verifying \(n_{Y'} = n_Z\).
Secondly, the function studies the fluctuations in the association of \(Z\) with each new variable \(Y'\) by using adapted comparisons criterions (see the documentation of <code><a href="error_group.html">error_group</a></code> for more details).
If grouping successive classes of \(Y\) leads to an improvement in the initial association between \(Y\) and \(Z\) then it is possible to conclude in favor of an ordinal coding for \(Y\) (rather than nominal)
but also to emphasize the consistency in the predictions proposed by the algorithm of fusion.</p>
<p>B. SIMILARITIES BETWEEN OBSERVED AND PREDICTED DISTRIBUTIONS</p>
<p>When the predictions of \(Y\) in B and/or \(Z\) in A are available in the <code>datab</code> argument, the similarities between the observed and predicted probabilistic distributions of \(Y\) and/or \(Z\) are quantified from the Hellinger distance (see (1)).
This measure varies between 0 and 1: a value of 0 corresponds to a perfect similarity while a value close to 1 (the maximum) indicates a great dissimilarity.
Using this distance, two distributions will be considered as close as soon as the observed measure will be less than 0.05.</p>
<p>C. STABILITY OF THE PREDICTIONS</p>
<p>These results are based on the decision rule which defines the stability of an algorithm in A (or B) as its average ability to assign a same prediction
of \(Z\) (or \(Y\)) to individuals that have a same given profile of covariates \(X\) and a same given level of \(Y\) (or \(Z\) respectively).</p>
<p>Assuming that the missing information of \(Z\) in base A was predicted from an OT algorithm (the reasoning will be identical with the prediction of \(Y\) in B, see (2) and (3) for more details), the function <code>verif_OT</code> uses the conditional probabilities stored in the
object <code>estimatorZA</code> (see outputs of the functions <code><a href="OT_outcome.html">OT_outcome</a></code> and <code><a href="OT_joint.html">OT_joint</a></code>) which contains the estimates of all the conditional probabilities of \(Z\) in A, given a profile of covariates \(x\) and given a level of \(Y = y\).
Indeed, each individual (or row) from A, is associated with a conditional probability \(P(Z= z|Y= y, X= x)\) and averaging all the corresponding estimates can provide an indicator of the predictions stability.</p>
<p>The function <code><a href="OT_joint.html">OT_joint</a></code> provides the individual predictions for subject \(i\): \(\widehat{z}_i\), \(i=1,\ldots,n_A\) according to the the maximum a posteriori rule:
$$\widehat{z}_i= \mbox{argmax}_{z\in \mathcal{Z}} P(Z= z| Y= y_i, X= x_i)$$
The function <code><a href="OT_outcome.html">OT_outcome</a></code> directly deduces the individual predictions from the probablities \(P(Z= z|Y= y, X= x)\) computed in the second part of the algorithm (see (3)).</p>
<p>It is nevertheless common that conditional probabilities are estimated from too rare covariates profiles to be considered as a reliable estimate of the reality.
In this context, the use of trimmed means and standard deviances is suggested by removing the corresponding probabilities from the final computation.
In this way, the function provides in output a table (<code>eff.neig</code> object) that provides the frequency of these critical probabilities that must help the user to choose.
According to this table, a minimal number of profiles can be imposed for a conditional probability to be part of the final computation by filling in the <code>min.neigb</code> argument.</p>
<p>Notice that these results are optional and available only if the argument <code>stab.prob = TRUE</code>.
When the predictions of \(Z\) in A and \(Y\) in B are available, the function <code>verif_OT</code> provides in output, global results and results by database.
The <code>res.stab</code> table can produce NA with <code>OT_outcome</code> output in presence of incomplete shared variables: this problem appears when the <code>prox.dist</code> argument is set to 0 and can
be simply solved by increasing this value.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    
<ol><li><p>Liese F, Miescke K-J. (2008). Statistical Decision Theory: Estimation, Testing, and Selection. Springer</p></li>
<li><p>Gares V, Dimeglio C, Guernec G, Fantin F, Lepage B, Korosok MR, savy N (2019). On the use of optimal transportation theory to recode variables and application to database merging. The International Journal of Biostatistics.
Volume 16, Issue 1, 20180106, eISSN 1557-4679. doi:10.1515/ijb-2018-0106</p></li>
<li><p>Gares V, Omer J (2020) Regularized optimal transport of covariates and outcomes in data recoding. Journal of the American Statistical Association. <a href="https://doi.org/10.1080/01621459.2020.1775615" class="external-link">doi:10.1080/01621459.2020.1775615</a></p></li>
</ol></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="OT_outcome.html">OT_outcome</a></code>, <code><a href="OT_joint.html">OT_joint</a></code>, <code><a href="proxim_dist.html">proxim_dist</a></code>, <code><a href="error_group.html">error_group</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Gregory Guernec</p>
<p><a href="mailto:otrecod.pkg@gmail.com">otrecod.pkg@gmail.com</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Example 1</span></span></span>
<span class="r-in"><span><span class="co">#-----</span></span></span>
<span class="r-in"><span><span class="co"># - Using the data simu_data</span></span></span>
<span class="r-in"><span><span class="co"># - Studying the proximity between Y and Z using standard criterions</span></span></span>
<span class="r-in"><span><span class="co"># - When Y and Z are predicted in B and A respectively</span></span></span>
<span class="r-in"><span><span class="co"># - Using an outcome model (individual assignment with knn)</span></span></span>
<span class="r-in"><span><span class="co">#-----</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">simu_data</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">outc1</span> <span class="op">&lt;-</span> <span class="fu"><a href="OT_outcome.html">OT_outcome</a></span><span class="op">(</span><span class="va">simu_data</span>,</span></span>
<span class="r-in"><span>  quanti <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">8</span><span class="op">)</span>, nominal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, ordinal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">6</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  dist.choice <span class="op">=</span> <span class="st">"G"</span>, percent.knn <span class="op">=</span> <span class="fl">0.90</span>, maxrelax <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  convert.num <span class="op">=</span> <span class="fl">8</span>, convert.class <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  indiv.method <span class="op">=</span> <span class="st">"sequential"</span>, which.DB <span class="op">=</span> <span class="st">"BOTH"</span>, prox.dist <span class="op">=</span> <span class="fl">0.30</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ---------------------------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> OT PROCEDURE in progress ...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ---------------------------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Type                     = OUTCOME</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Distance                 = Gower</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Percent closest knn      = 90%</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Relaxation parameter     = NO</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Relaxation value         = 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Individual pred process  = Sequential</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> DB imputed               = BOTH</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ---------------------------------------</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">verif_outc1</span> <span class="op">&lt;-</span> <span class="fu">verif_OT</span><span class="op">(</span><span class="va">outc1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">verif_outc1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nb.profil</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 232</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $conf.mat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          predZ</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> predY       1   2   3   4   5 Sum</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [20-40]   2  83   2   2 217 306</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [40-60[ 253   2   2  40   0 297</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [60-80]   1   6  59  31   0  97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sum     256  91  63  73 217 700</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $res.prox</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          N V_cram rank_cor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Global 700   0.89   -0.547</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1st DB 300   0.88   -0.537</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2nd DB 400   0.89   -0.555</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $res.grp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $hell</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 YA_YB ZA_ZB</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hellinger dist. 0.009 0.015</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $eff.neig</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $res.stab</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Example 2</span></span></span>
<span class="r-in"><span><span class="co">#-----</span></span></span>
<span class="r-in"><span><span class="co"># - Using the data simu_data</span></span></span>
<span class="r-in"><span><span class="co"># - Studying the proximity between Y and Z using standard criterions and studying</span></span></span>
<span class="r-in"><span><span class="co">#   associations by grouping levels of Z</span></span></span>
<span class="r-in"><span><span class="co"># - When only Y is predicted in B</span></span></span>
<span class="r-in"><span><span class="co"># - Tolerated distance between a subject and a profile: 0.30 * distance max</span></span></span>
<span class="r-in"><span><span class="co"># - Using an outcome model (individual assignment with knn)</span></span></span>
<span class="r-in"><span><span class="co">#-----</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">simu_data</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">outc2</span> <span class="op">&lt;-</span> <span class="fu"><a href="OT_outcome.html">OT_outcome</a></span><span class="op">(</span><span class="va">simu_data</span>,</span></span>
<span class="r-in"><span>  quanti <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">8</span><span class="op">)</span>, nominal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, ordinal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">6</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  dist.choice <span class="op">=</span> <span class="st">"G"</span>, percent.knn <span class="op">=</span> <span class="fl">0.90</span>, maxrelax <span class="op">=</span> <span class="fl">0</span>, prox.dist <span class="op">=</span> <span class="fl">0.3</span>,</span></span>
<span class="r-in"><span>  convert.num <span class="op">=</span> <span class="fl">8</span>, convert.class <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  indiv.method <span class="op">=</span> <span class="st">"sequential"</span>, which.DB <span class="op">=</span> <span class="st">"B"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ---------------------------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> OT PROCEDURE in progress ...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ---------------------------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Type                     = OUTCOME</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Distance                 = Gower</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Percent closest knn      = 90%</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Relaxation parameter     = NO</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Relaxation value         = 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Individual pred process  = Sequential</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> DB imputed               = B</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ---------------------------------------</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">verif_outc2</span> <span class="op">&lt;-</span> <span class="fu">verif_OT</span><span class="op">(</span><span class="va">outc2</span>, group.class <span class="op">=</span> <span class="cn">TRUE</span>, ordinal <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">verif_outc2</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nb.profil</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 232</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $conf.mat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> predY       1   2   3   4   5 Sum</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [20-40]   1  47   1   1 126 176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [40-60[ 144   1   1  24   0 170</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [60-80]   0   3  33  18   0  54</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sum     145  51  35  43 126 400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $res.prox</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        N   V_cram rank_cor </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  400.000    0.890   -0.555 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $res.grp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   grp levels Z to Y error_rate  Kappa Vcramer RankCor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         1 2 3/4/5       81.8 -0.243    0.57  -0.586</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         1 2/3 4/5       81.8 -0.241    0.73  -0.443</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         1 2/3/4 5       83.2 -0.206    0.66  -0.330</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         1/2/3 4 5       86.8 -0.209    0.63  -0.308</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         1/2 3 4/5       93.2 -0.411    0.75  -0.650</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         1/2 3/4 5       94.8 -0.369    0.66  -0.492</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $hell</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 YA_YB ZA_ZB</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hellinger dist. 0.009    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $eff.neig</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $res.stab</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Example 3</span></span></span>
<span class="r-in"><span><span class="co">#-----</span></span></span>
<span class="r-in"><span><span class="co"># - Using the data simu_data</span></span></span>
<span class="r-in"><span><span class="co"># - Studying the proximity between Y and Z using standard criterions and studying</span></span></span>
<span class="r-in"><span><span class="co">#   associations by grouping levels of Z</span></span></span>
<span class="r-in"><span><span class="co"># - Studying the stability of the conditional probabilities</span></span></span>
<span class="r-in"><span><span class="co"># - When Y and Z are predicted in B and A respectively</span></span></span>
<span class="r-in"><span><span class="co"># - Using an outcome model (individual assignment with knn)</span></span></span>
<span class="r-in"><span><span class="co">#-----</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">verif_outc2b</span> <span class="op">&lt;-</span> <span class="fu">verif_OT</span><span class="op">(</span><span class="va">outc2</span>, group.class <span class="op">=</span> <span class="cn">TRUE</span>, ordinal <span class="op">=</span> <span class="cn">TRUE</span>, stab.prob <span class="op">=</span> <span class="cn">TRUE</span>, min.neigb <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">verif_outc2b</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nb.profil</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 232</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $conf.mat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> predY       1   2   3   4   5 Sum</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [20-40]   1  47   1   1 126 176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [40-60[ 144   1   1  24   0 170</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [60-80]   0   3  33  18   0  54</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sum     145  51  35  43 126 400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $res.prox</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        N   V_cram rank_cor </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  400.000    0.890   -0.555 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $res.grp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   grp levels Z to Y error_rate  Kappa Vcramer RankCor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         1 2 3/4/5       81.8 -0.243    0.57  -0.586</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         1 2/3 4/5       81.8 -0.241    0.73  -0.443</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         1 2/3/4 5       83.2 -0.206    0.66  -0.330</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         1/2/3 4 5       86.8 -0.209    0.63  -0.308</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         1/2 3 4/5       93.2 -0.411    0.75  -0.650</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         1/2 3/4 5       94.8 -0.369    0.66  -0.492</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $hell</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 YA_YB ZA_ZB</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hellinger dist. 0.009    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $eff.neig</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Nb.neighbor Nb.Prob</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            3       5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            4       9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            5      12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4            6      14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5            7      11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6            8      23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7            9      14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8           10      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9           11      15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10          12      12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $res.stab</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          N min.N mean    sd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2nd DB 386     5 0.95 0.153</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gregory Guernec, Valerie Gares.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.9000.</p>
</div>

      </footer></div>

  


  

  </body></html>

